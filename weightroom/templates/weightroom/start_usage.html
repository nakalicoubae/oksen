{% extends 'weightroom/base.html' %}
{% load custom_filters %}
{% block content %}

<h2>사용 시작</h2>

{% if current_usage %}
    <p>이미 사용 중입니다. 체크리스트만 수정할 수 있습니다.</p>
{% endif %}

<form method="post">
    {% csrf_token %}

    <table>
        <tr>
            <th>항목</th>
            <th colspan="2">뒷정리여부</th>
            <th>파손</th>
        </tr>
        <tr>
            <th></th>
            <th>예</th>
            <th>아니오</th>
            <th></th>
        </tr>
        {% for field_name in field_names %}
        <tr>
            <td>{{ field_name }}</td>
            <td colspan="2">{{ form|getattribute:field_name|add:"_청소" }}</td>
            <td>{{ form|getattribute:field_name|add:"_파손" }}</td>
        </tr>
        {% endfor %}
    </table>

    <div>
        <h4>요구 및 불편사항</h4>
        {{ form.요구_및_불편사항 }}
    </div>

    <button type="submit">{% if current_usage %}체크리스트 저장{% else %}저장 및 사용 시작{% endif %}</button>
</form>

{% endblock %}